# 3 .Manipulando Arquivos em Python
## Sumário 
- [Introdução a manipulação de arquivos](#1-introdução-a-manipulação-de-arquivos)
  - [Porque manipular arquivos](#11-por-que-precisamos-manipular-arquivos-)
  - [O conceito de arquivo em informática](#12-conceito-de-arquivo-em-informática)
- [Abrindo e fechando arquivos](#2-abrindo-e-fechando-arquivos)
  - [Por que manipular arquivos em Python](#21-por-que-precisamos-manipular-arquivos-)
  - [Modos de abertura de arquivos](#22-modos-de-abertura-de-arquivo)
- [Lendo de um arquivo](#3-lendo-de-um-arquivo)
  - [Método Read](#31-métododo-read)
  - [Readline & Readlines](#32-método-readline-e-readlines)
  - [Readline](#33-métododo-readline)
  - [readlines](#34-métododo-readlines)
- [Escrevendo de um arquivo](#4-escrevendo-em-um-arquivo)
- [Gerenciando arquivos de diretórios](#5-gerenciando-arquivos-e-diretórios)
- [Tratamento de exceções](#6-tratamento-de-exceções-em-manipulação-de-arquivo)
  - [Exceções mais comuns](#61-exceções-mais-comuns)
- [Boas praticas de manipulação de arquivos](#7-boas-práticas-na-manipulação-de-arquivos)
  - [Dica 1 ](#71-bloco-with)
  - [Dica 2 ](#72-verifique-se-o-arquivo-foi-aberto-com-sucesso)
  - [Dica 3 ](#73-use-a-codificação-correta)
- [Trabalhando com arquivos CSV](#8-trabalhando-com-arquivos-csv)
  - [Lendo arquivo CSV](#81-lendo-arquivo-csv)
  - [Escrevendo em um arquivo CSV](#82-escrevendo-arquivos-csv)
  - [Boas práticas em CSV](#83-práticas-recomendadas)
- [Links Uteis](#links-uteis)
---
## 1. Introdução a manipulação de arquivos
### Objetivo Geral 
Vamos aprender a importância dos arquivos, como abrir, ler e gerenciar arquivos em Python. Vamos trabalhar com os formatos `txt e csv`.  

### 1.1 Por que precisamos manipular arquivos ?
Os arquivos são essenciais para qualquer tipo de programação, pois fornecem um meio de armazenar e recuperar dados. Através de manipulação de arquivos, podemos persistir os dados além da vida útil de um programa específico.  
### 1.2 Conceito de arquivo em informática
Um arquivo é um container no computador onde as informações são armazenadas em formato digital. Existem dois tipos de arquivos que podemos manipular em Python: arquivos de texto e arquivos binários. 

---
## 2. Abrindo e fechando arquivos
### 2.1 Por que precisamos manipular arquivos ?
Para manipular arquivos em Python, primeiro precisamos abri-los. Usamos a função `open()`para isso. Quando terminamos de trabalhar com o arquivo, usamos a função `close()` para liberar recursos.  
__Exemplo de código:__  
```
file = open("example.txt","r")
# ... Fazemos algo com o arquivo ....
file.close()
```
### 2.2 Modos de abertura de arquivo  
Existem diferentes modos para abrir um arquivo, como somente leitura (`r`), gravação (`w`) e anexar (`a`). O modo de abertura deve ser escolhido de acordo com a operação que iremos realizar no mesmo.  
```
# Para ler um arquivo 
file = open("example.txt","r")

# Para escrever em um arquivo 
file = open("example.txt","w")

# Para anexar conteúdo a um arquivo existente 
file = open("example.txt","a")

```
--- 
## 3. Lendo de um arquivo
__Introdução__  
Python fornece várias maneiras de ler um arquivo. Podemos usar `read()`, `readline()` ou `readlines()` dependendo de nossas necessidades. 
### 3.1 Métododo read:  
```
# Ler todo o conteúdo do arquivo de uma vez 
file = open('example.txt', 'r')
print(file.read())
file.close()

```
### 3.2 Método readline e readlines
O método `readline()` lê uma linha por vez, enquanto o `readlines()` retorna uma lista onde cada elemento é uma linha do arquivo.  

o método readline retorna linha a linha do conteúdo que está sendo "lido" naquele momento.  
### 3.3 Métododo readline: 
```
# Ler todo o conteúdo do arquivo de uma vez 
file = open('example.txt', 'r')
print(arquivo.readline())
file.close()
```
O se utilizar o método de readlines, será devolvido uma lista de strings do conteúdo.  
### 3.4 Métododo readlines:
```
# Ler todo o conteúdo do arquivo de uma vez 
file = open('example.txt', 'r')
for linha in arquivo.readlines():
    print(linha)
file.close()
```
--- 
## 4. Escrevendo em um arquivo 
__Introdução__  
Podemos usar `write()` ou `writelines()` para escrever em um arquivo. Lembre-se, no entanto, de abrir o arquivo no modo correto.   
__Exemplo de código:__  
```
file = open('example.txt,'w')
file.write("Olá, mundo!!)
file.close()
```
```
file = open('example.txt,'w')
arquivo.writelines(["\n","escrevendo ","\n","um ","\n","novo ","\n","texto"])
file.close()
```
Ou seja quando se deseja realizar a escrita "de uma vez" dentro de um arquivo seja uma frase ou texto porém de uma só vez, utiliza-se o método `write`, porém quando se tem uma cadeia de caracteres e esses necessitam ser escrito de forma de "cadeia" de strings utiliza-se o `writelines`.  

--- 
## 5. Gerenciando arquivos e diretórios
__Introdução__  
Python também oferece funções para gerenciar arquivos e diretórios. Podemos criar, renomear e excluir arquivos e diretórios usando os módulos `os` e `shutil`  
__Exemplo de código:__  
```
import os 
import shutil 

# Criar um diretório 
os.mkdir("exemplo)

# Renomear um arquivo. 
os.rename("old.txt", "new.txt")

# Remover um arquivo
os.remove("unwanted.txt")

# Mover um arquivo 
shutil.move("source.txt", "destination.txt")
```
Ainda sobre a manipulação de arquivo, podemos utilizar o pacote do python pathlib Path no qual irá retornar o caminho do arquivo, para que possamos concatenar esse arquivo, com o diretório em questão utilizamos os argumentos `__file__` .parent, o que irá retornar o caminho acima do diretório, ou seja a "pasta raiz" do arquivo. 


--- 
## 6. Tratamento de exceções em manipulação de arquivos
__Introdução__  
Tratar erros é uma parte importante da manipulação de arquivos. Python oferece uma variedade de exceções que nos permitem lidar com erros comuns.  
### 6.1 Exceções mais comuns
- **FileNotFoundError:** Lançada quando o arquivo que está sendo aberto não pode ser encontrado no diretório especificado. 
- **PermissionError:** Lançada quando ocorre uma tentativa de abrir um arquivo sem as permissões adequadas para leitura ou gravação. 
- **IOError:** Lançada quando ocorre um erro geral de E/S(Entrada/Saída) ao trabalhar com o arquivo, como problemas de permissão, falta de espaço em disco, entre outros. 
- **UnicodeDecodeError:** Lançada quando ocorre um erro ao tentar decodificar os dados de um arquivo de texto usando uma codificação inadequada. 
- **UnicodeEncodeError:** Lançada quando ocorre um erro ao tentar codificar dados em uma determinada codificação ao gravar em um arquivo de texto. 
- **IsADirectoryError:** Lançada quando é feita uma tentativa de abrir um diretório em vez de um arquivo de texto. 

```
from pathlib import Path

ROOT_PATH = Path(__file__).parent

try:
    arquivo = open(ROOT_PATH/'NOVO-DIRETORIO'/"novo.txt",'r')
except FileNotFoundError as exc:
    print("Arquivo não encontrado")
    print(exc)
except IsADirectoryError as ex:
    print(f'Não foi possível abrir o arquivo: {ex}')
except IOError as exc:
    print(f'Erro ao abrir o arquivo: {exc}')
except Exception as exc:
    print(f"ALgum problema ocorreu ao tentar abrir o arquivo: {exc}")

```
--- 
## 7. Boas práticas na manipulação de arquivos
__Introdução__  
Ao manipular arquivos em Python existem algumas boas práticas que podemos seguir, vamos abordar as principais.  

### 7.1 Bloco with 
Use o gerenciamento de contexto (context manager) com a declaração `with`. O gerenciamento de contexto permite trabalhar com arquivos de forma segura, garantindo que eles sejam fechados corretamente, mesmo em casos de exceções. 
__Exemplo de código:__  

```
with open('arquivo.txt','r') as arquivo:
  # Faça as operações de leitura/gravação no arquivo
```
### 7.2 Verifique se o arquivo foi aberto com sucesso. 
É recomendado verificar se o arquivo foi aberto corretamente antes de executar operações de leitura ou gravação nele.  
__Exemplo de código:__  

```
try:
  with open('aquivo.txt','r') as arquivo:
      # Faça as operações de leitura/gravação no arquivo 
  except IOError:
    print('Não foi possível abrir o arquivo')

```
### 7.3 Use a codificação correta
Certifique-se de usar a codificação correta ao ler ou gravar arquivos de texto. O argumento `encoding` da função `open()` permite especificar a codificação.  

__Exemplo de código:__  

```
with open('aquivo.txt','r',encoding='utf-8') as arquivo:
  # Operações de leitura com codificação UTF-8

with open('aquivo.txt','w',encoding='utf-8') as arquivo:
  # Operações de escrita com codificação UTF-8rquivo 
```

--- 
## 8. Trabalhando com arquivos CSV
__Introdução__  
Vamos aprender sobre arquivos CSV, um formato de arquivo amplamente utilizado para armazenar dados tabulares. CSV é a sigla para 'Comma Separated Values'.  
### 8.1 Lendo arquivo CSV
Python fornece um módulo chamado `csv` para lidar facilmente com arquivos CSV.  

__Exemplo de código:__  

```
import csv 

with open('example.csv','r') as file:
  reader = csv.reader(file)
  for row in reader:
    print(row)
```
### 8.2 Escrevendo arquivos CSV
Da  mesma forma podemos utilizar o módulo `csv` para escrever em arquivos CSV.  
__Exemplo de código:__  

```
import csv 

with open('example.csv','w') as file:
  writer = csv.writer(file)
  writer.writerow(["nome", "idade"])
  writer.writerow(["Ana", 30])
  writer.writerow(["João", 25])

```
### 8.3 Práticas recomendadas 
- Usar csv.reader e csv.writer para manipular arquivos CSV. 
- Fazer o tratamento correto das exceções. 
- Ao gravar arquivos CSV definir o argumento newline="" no método `open`.


--- 
### Links Uteis
- [Trilha git](https://github.com/digitalinnovationone/trilha-python-dio)
- [Documentação CSV Python](https://docs.python.org/3/library/csv.html)

---
<table style="text-align: center; width: 100%;"> 
<caption><b>Skils do projeto </b></caption>
<tr>
    <td style="text-align: center;">
    <img alt="Markdown" src="https://img.shields.io/badge/markdown-%23000000.svg?style=for-the-badge&logo=markdown&logoColor=white"/>
    </td>
    <td style="text-align: center;">
    <img alt="Python" src="https://img.shields.io/badge/python-3670A0?style=for-the-badge&logo=python&logoColor=ffdd54"/>
    </td>
    <td style="text-align: center;">
    <img alt="VSCode" src="https://img.shields.io/badge/Visual%20Studio%20Code-0078d7.svg?style=for-the-badge&logo=visual-studio-code&logoColor=white"/>
    </td>
<tr> 
</table>

---
Titulo: 3 .Manipulando Arquivos em Python 

Autor: Thierry Lucas Chaves

Data criacao: 08/07/2025

Data modificacao: 15/07/2025

Versao: 1.0  

---